<!doctype HTML>
<html>
	<head>
		<meta charset="utf-8">
		<title>Best chat in the World</title>
		<link rel="stylesheet" href="test.css"></link>
		<script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script>
		<script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
		<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
		<script>
		// Initialize Firebase
			var config = {
					apiKey: "AIzaSyC6hEUAYh7rAq_68yRg2tmb-e5AlK7-V_0",
					authDomain: "mmaxhat.firebaseapp.com",
					databaseURL: "https://mmaxhat.firebaseio.com",
					projectId: "mmaxhat",
					storageBucket: "mmaxhat.appspot.com",
					messagingSenderId: "981715995494"
				};
				firebase.initializeApp(config);
			var database = firebase.database();
		</script>
		<script type="text/javascript">
			// FirebaseUI config.
			var uiConfig = {
				signInOptions: [
					// Leave the lines as is for the providers you want to offer your users.
					firebase.auth.GoogleAuthProvider.PROVIDER_ID,
					firebase.auth.EmailAuthProvider.PROVIDER_ID
				],
				// tosUrl and privacyPolicyUrl accept either url string or a callback
				// function.
				// Terms of service url/callback.
				tosUrl: '<your-tos-url>',
				// Privacy policy url/callback.
				privacyPolicyUrl: function() {
					window.location.assign('<your-privacy-policy-url>');
				}
			};
			initApp = function() {
						firebase.auth().onAuthStateChanged(function(user) {
							if (user) {
								// User is signed in.
								var uid = user.uid;
								var phoneNumber = user.phoneNumber;
								var providerData = user.providerData;
								var updates = {};
								updates['/users/' + uid] = {
									displayName: user.displayName,
									email: user.email,
									emailVerified: user.emailVerified,
									photoURL: user.photoURL
								};
								document.getElementById("AIB").style.display = "block";
								document.getElementById("firebaseui-auth-container").style.display = "none";
								return firebase.database().ref().update(updates);
							}});
			};
			window.addEventListener('load', function() {
				initApp()
			});
			var ui = new firebaseui.auth.AuthUI(firebase.auth());
			// The start method will wait until the DOM is loaded.
			ui.start('#firebaseui-auth-container', uiConfig);
		</script>
		<script src="chat.js"></script>
	</head>
	<body>
		<div id="AIA">
			<div id="AIB" style="display:none;">
				<table class="table" style="width:100%;">
					<tbody>


						<tr id="tr1">
							<td colspan="4">
								<div class="tableTaker" style="overflow-x:scroll;border-style:solid; border-width:2px; border-color:#00ccff; border-radius:2px;position:;">
									<table class="table" style="width:100%;">
										<tr class="trIn">
											<td><div class="in3">TestUser</div></td>
										</tr>
									</table>
								</div>
							</td>
						</tr>



						<tr id="tr2">
							<td colspan="4" style="width:50%;">
								<div class="tableTaker" style="overflow-y:scroll;border-style:solid; border-width:2px; border-color:#00ccff; border-radius:2px;">
									<div>
										<table class="table" style="width:100%;">
											<tbody id="txtOutTable">
												<tr class="trIn">  <td><div class="in2" id="txtTitle">Hello World! There is test message</div></td> </tr>
											</tbody>
										</table>
									</div>
								</div>
			 			</td>
					</tr>


					<tr id="tr3">
						<td colspan="4">
							<div class="tableTaker">
								<input id="txtIn" type="text" style="border-style:solid; border-width:2px; border-color:#00ccff; border-radius:2px; width:100%; height:100%;">
							</input>
						</div>
					</td>
				</tr>

					<tr class="tr4">
						<td style="width:25%"><div class="in1" id="newUserCr">Новый пользователь</div></td>
						<td style="width:25%"><div class="in1" id="loginAsUser">Существующий пользователь</div></td>
						<td style="width:25%"><div class="in1" id="menu">Меню(будет когда-то)</div></td>
						<td style="width:25%"><div class="in1" id="nothing">,,,,.....</div></td>
					</tr>
				</tbody>
			</table>
			</div>
			<div id="regTaker" style="visibility:hidden;align:center;">
				<input id="inputName" type="input" value="Name" />
				<input id="inputPassword" type="input" value="Password" />
				<input type="button" value="Создать"/>
			</div>
			<div id="firebaseui-auth-container" style="position: fixed; left:40%; z-index: 9999; display: block;"></div>
		</div>
	</body>
</html>
